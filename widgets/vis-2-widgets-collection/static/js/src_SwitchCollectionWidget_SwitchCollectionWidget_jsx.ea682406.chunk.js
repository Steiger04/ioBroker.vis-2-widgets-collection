"use strict";(self.webpackChunkiobroker_vis_widgets_react_collection=self.webpackChunkiobroker_vis_widgets_react_collection||[]).push([["src_SwitchCollectionWidget_SwitchCollectionWidget_jsx"],{6018:(t,e,i)=>{i.r(e),i.d(e,{default:()=>C});var o=i(7051),a=i(8437),n=i(6211),c=i(7613),l=i(9966),r=i(900),s=i(7085),d=i(4657),h=i(6016),u=i(2152),p=i(6255),g=i(5001),m=i(9042),v=i(4535),b=i(8565);const f=(0,v.Ay)(m.A)((t=>{let{width:e,height:i,maxHeight:o,data:a,widget:n,theme:c}=t;return{width:"100%",height:"100%",padding:0,margin:0,"&.MuiSwitch-root":{overflow:"visible"},"& .MuiSwitch-switchBase":{margin:0,padding:0,top:"50%",left:"0%",transform:"translate(-50%, -50%) translateX(".concat(o>=(n.data.thumbSize||62)?n.data.thumbSize/2-4||27:o/2-4,"px)"),"& .MuiSwitch-input":{left:0,width:e},"&.Mui-checked":{top:"50%",left:"100%",transform:"translate(-50%, -50%) translateX(".concat(o>=(n.data.thumbSize||62)?-(n.data.thumbSize/2-4)||-35:-(o/2-4),"px)"),"& .MuiSwitch-input":{left:-e+(n.data.thumbSize||62),width:e},"& .MuiSwitch-thumb":{backgroundColor:n.data.thumbColorTrue||c.palette.primary.main},"& .MuiSwitch-thumb:before":{top:"calc(".concat(a.iconYOffset," * -1)"),left:a.iconXOffset,backgroundSize:"".concat(a.iconSizeOnly||"100","% ").concat(a.iconSizeOnly||"100","%"),backgroundImage:a.iconActive&&"url('".concat(a.iconActive,"')")},"& + .MuiSwitch-track":{backgroundColor:n.data.trackColor||("dark"===c.palette.mode?(0,b.alpha)("rgb(144, 202, 249)",.5):(0,b.alpha)("#1976d2",.5))}}},"& .MuiSwitch-thumb":{backgroundColor:n.data.thumbColorFalse,width:n.data.thumbSize||62,maxWidth:o,height:n.data.thumbSize||62,maxHeight:o,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",top:"calc(".concat(a.iconYOffset," * -1)"),left:a.iconXOffset,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"".concat(a.iconSizeOnly||"100","% ").concat(a.iconSizeOnly||"100","%"),backgroundImage:a.iconActive&&"url('".concat(a.iconActive,"')"),color:a.iconColorActive||a.iconColor,filter:a.iconColorActive||a.iconColor?"drop-shadow(0px 10000px 0)":null,transform:a.iconColorActive||a.iconColor?"translateY(-10000px)":null}},"& .MuiSwitch-track":{backgroundColor:n.data.trackColor&&(0,b.alpha)(n.data.trackColor,.5)||("dark"===c.palette.mode?(0,b.alpha)("#ffffff",.3):(0,b.alpha)("#000000",.38)),borderRadius:10}}}));var w=i(579);const S=function(){var t,e,i,o,n,c;const l=(0,a.useRef)(null),{setValue:r,oidObject:m,widget:v}=(0,a.useContext)(h.C),{data:b}=(0,u.A)("oid"),S=(0,g.A)("oid"),x=null===m||void 0===m?void 0:m._id,C=null===m||void 0===m||null===(t=m.common)||void 0===t?void 0:t.type,k=v.data.sampleInterval?v.data.sampleIntervalValue:v.data.delay,{debouncedValue:y,sampledValue:A}=(0,p.A)(S,k);return(0,a.useEffect)((()=>{v.data.sampleInterval||void 0===y||r(x,y)}),[y,x,r,v.data.sampleInterval]),(0,a.useEffect)((()=>{v.data.sampleInterval&&void 0!==A&&r(x,A)}),[A,x,r,v.data.sampleInterval]),(0,w.jsxs)(d.A,{data:b,oidValue:S,children:[(b.icon||b.iconActive)&&(0,w.jsx)("img",{alt:"",src:b.icon||b.iconActive,style:{position:"absolute",top:"calc(0px + ".concat(v.data.iconYOffset,")"),right:"calc(0px + ".concat(v.data.iconXOffset,")"),width:b.iconSize||b.iconSizeActive,height:b.iconSize||b.iconSizeActive,color:b.iconColor||b.iconColorActive,filter:b.iconColor||b.iconColorActive?"drop-shadow(0px 10000px 0)":null,transform:b.iconColor||b.iconColorActive?"translateY(-10000px)":null}}),(0,w.jsx)(s.Box,{sx:{position:"relative",width:"100%",height:v.data.trackSize&&"".concat(v.data.trackSize,"%")||"10%"},children:(0,w.jsx)(s.Box,{ref:l,sx:{width:"100%",height:"100%",px:"8px",display:"flex",justifyContent:"center",alignItems:"center"},children:void 0!==S&&void 0!==v.data.thumbSize&&(0,w.jsx)(f,{disabled:"boolean"!==C,width:null===(e=l.current)||void 0===e?void 0:e.clientWidth,height:null===(i=l.current)||void 0===i?void 0:i.clientHeight,maxHeight:null===(o=l.current)||void 0===o||null===(n=o.parentElement)||void 0===n||null===(c=n.parentElement)||void 0===c?void 0:c.clientHeight,data:b,widget:v,checked:S,onChange:()=>r(x,!S)})})})]})};class x extends n.A{static getWidgetInfo(){return{id:"tplSwitchCollectionWidget",visSet:"vis-2-widgets-collection",visSetLabel:"widgets_collection",visName:"SwitchCollectionWidget",visWidgetLabel:"switch_collection_widget",visAttrs:[(0,l.A)(),{name:"switch",label:"group_switch",fields:[{name:"thumbSize",label:"thumb_size",type:"slider",min:0,max:500,default:62,step:1},{name:"thumbColorTrue",label:"thumb_color_true",type:"color"},{name:"thumbColorFalse",label:"thumb_color_false",type:"color"},{name:"trackSize",label:"track_size",type:"slider",min:0,max:100,default:10,step:1},{name:"trackColor",label:"track_color",type:"color"}]},(0,c.A)("values")],visDefaultStyle:{width:"100%",height:"100px",position:"relative"},visPrev:"widgets/vis-2-widgets-collection/img/prev-collection-switch.png"}}getWidgetInfo(){return x.getWidgetInfo()}async propertiesUpdate(){const t=JSON.stringify(this.state.rxData);this.lastRxData!==t&&(this.lastRxData=t,await this.createStateObjectAsync("oid"))}async onRxDataChanged(t){await this.propertiesUpdate()}onRxStyleChanged(){}onStateUpdated(t,e){}async componentDidMount(){super.componentDidMount(),await this.propertiesUpdate()}renderWidgetBody(t){super.renderWidgetBody(t),console.log("this",this),console.log("props",t);const e={id:t.id,refService:t.refService,style:t.style,widget:(0,o.A)((0,o.A)({},t.widget),{},{data:this.state.rxData,style:this.state.rxStyle}),setValue:this.setValue,setState:this.setState.bind(this),oidObject:this.state.oidObject,values:this.state.values,isSignalVisible:this.isSignalVisible.bind(this),getPropertyValue:this.getPropertyValue.bind(this),mode:this.props.context.themeType,socket:this.props.context.socket,theme:this.props.context.theme,wrappedContent:this.wrappedContent};return t.widget.data.noCard||t.widget.usedInWidget?this.wrappedContent=!1:this.wrappedContent=!0,(0,r.A)(this.wrapContent((0,w.jsx)(S,{})),e)}}const C=x}}]);
//# sourceMappingURL=src_SwitchCollectionWidget_SwitchCollectionWidget_jsx.ea682406.chunk.js.map